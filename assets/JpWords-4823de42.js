var Ne=Object.defineProperty;var We=(s,e,n)=>e in s?Ne(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var re=(s,e,n)=>(We(s,typeof e!="symbol"?e+"":e,n),n);import{S as _e,i as me,s as be,k as te,l as ne,c as N,o as oe,m as W,a as w,p as Be,q as Z,r as Ce,f as R,g as J,u as je,t as M,d as k,v as se,x as ye,y as Ie,z as fe,A as $,B as de,C as Oe,D as Re,E as Me,F as Ae,G as Pe,H as pe,e as P,b as K,I as A,J as v,K as S,L as F,M as Je,N as he}from"./index-6946e34c.js";import{S as ae,R as we,d as Ke,C as ce}from"./ActionIcons-7a9174d2.js";function qe(s){let e;const n=s[10].default,a=Re(n,s,s[12],null);return{c(){a&&a.c()},m(r,l){a&&a.m(r,l),e=!0},p(r,l){a&&a.p&&(!e||l&4096)&&Me(a,n,r,r[12],e?Pe(n,r[12],l,null):Ae(r[12]),null)},i(r){e||(M(a,r),e=!0)},o(r){R(a,r),e=!1},d(r){a&&a.d(r)}}}function Ue(s){let e,n,a;const r=[{tag:s[3]},{use:[s[5],...s[0]]},{class:te({[s[1]]:!0,"mdc-button__label":s[6]==="button","mdc-fab__label":s[6]==="fab","mdc-tab__text-label":s[6]==="tab","mdc-image-list__label":s[6]==="image-list","mdc-snackbar__label":s[6]==="snackbar","mdc-banner__text":s[6]==="banner","mdc-segmented-button__label":s[6]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":s[6]==="data-table:pagination","mdc-data-table__header-cell-label":s[6]==="data-table:sortable-header-cell"})},s[6]==="snackbar"?{"aria-atomic":"false"}:{},{tabindex:s[7]},s[8]];var l=s[2];function c(t){let o={$$slots:{default:[qe]},$$scope:{ctx:t}};for(let i=0;i<r.length;i+=1)o=$(o,r[i]);return{props:o}}return l&&(e=ne(l,c(s)),s[11](e)),{c(){e&&N(e.$$.fragment),n=oe()},m(t,o){e&&W(e,t,o),w(t,n,o),a=!0},p(t,[o]){const i=o&491?Be(r,[o&8&&{tag:t[3]},o&33&&{use:[t[5],...t[0]]},o&66&&{class:te({[t[1]]:!0,"mdc-button__label":t[6]==="button","mdc-fab__label":t[6]==="fab","mdc-tab__text-label":t[6]==="tab","mdc-image-list__label":t[6]==="image-list","mdc-snackbar__label":t[6]==="snackbar","mdc-banner__text":t[6]==="banner","mdc-segmented-button__label":t[6]==="segmented-button","mdc-data-table__pagination-rows-per-page-label":t[6]==="data-table:pagination","mdc-data-table__header-cell-label":t[6]==="data-table:sortable-header-cell"})},o&64&&Z(t[6]==="snackbar"?{"aria-atomic":"false"}:{}),o&128&&{tabindex:t[7]},o&256&&Z(t[8])]):{};if(o&4096&&(i.$$scope={dirty:o,ctx:t}),o&4&&l!==(l=t[2])){if(e){Ce();const u=e;R(u.$$.fragment,1,0,()=>{J(u,1)}),je()}l?(e=ne(l,c(t)),t[11](e),N(e.$$.fragment),M(e.$$.fragment,1),W(e,n.parentNode,n)):e=null}else l&&e.$set(i)},i(t){a||(e&&M(e.$$.fragment,t),a=!0)},o(t){e&&R(e.$$.fragment,t),a=!1},d(t){s[11](null),t&&k(n),e&&J(e,t)}}}function Te(s,e,n){const a=["use","class","component","tag","getElement"];let r=se(e,a),{$$slots:l={},$$scope:c}=e;const t=ye(Ie());let{use:o=[]}=e,{class:i=""}=e,u,{component:_=ae}=e,{tag:g=_===ae?"span":void 0}=e;const C=fe("SMUI:label:context"),E=fe("SMUI:label:tabindex");function B(){return u.getElement()}function p(d){Oe[d?"unshift":"push"](()=>{u=d,n(4,u)})}return s.$$set=d=>{e=$($({},e),de(d)),n(8,r=se(e,a)),"use"in d&&n(0,o=d.use),"class"in d&&n(1,i=d.class),"component"in d&&n(2,_=d.component),"tag"in d&&n(3,g=d.tag),"$$scope"in d&&n(12,c=d.$$scope)},[o,i,_,g,u,t,C,E,r,B,l,p,c]}class ge extends _e{constructor(e){super(),me(this,e,Te,Ue,be,{use:0,class:1,component:2,tag:3,getElement:9})}get getElement(){return this.$$.ctx[9]}}function ke(s){let e;return{c(){e=P("div"),A(e,"class","mdc-button__touch")},m(n,a){w(n,e,a)},d(n){n&&k(e)}}}function Le(s){let e,n,a,r;const l=s[28].default,c=Re(l,s,s[30],null);let t=s[6]&&ke();return{c(){e=P("div"),n=K(),c&&c.c(),t&&t.c(),a=oe(),A(e,"class","mdc-button__ripple")},m(o,i){w(o,e,i),w(o,n,i),c&&c.m(o,i),t&&t.m(o,i),w(o,a,i),r=!0},p(o,i){c&&c.p&&(!r||i[0]&1073741824)&&Me(c,l,o,o[30],r?Pe(l,o[30],i,null):Ae(o[30]),null),o[6]?t||(t=ke(),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},i(o){r||(M(c,o),r=!0)},o(o){R(c,o),r=!1},d(o){o&&k(e),o&&k(n),c&&c.d(o),t&&t.d(o),o&&k(a)}}}function Fe(s){let e,n,a;const r=[{tag:s[10]},{use:[[we,{ripple:s[3],unbounded:!1,color:s[4],disabled:!!s[23].disabled,addClass:s[19],removeClass:s[20],addStyle:s[21]}],s[17],...s[0]]},{class:te({[s[1]]:!0,"mdc-button":!0,"mdc-button--raised":s[5]==="raised","mdc-button--unelevated":s[5]==="unelevated","mdc-button--outlined":s[5]==="outlined","smui-button--color-secondary":s[4]==="secondary","mdc-button--touch":s[6],"mdc-card__action":s[18]==="card:action","mdc-card__action--button":s[18]==="card:action","mdc-dialog__button":s[18]==="dialog:action","mdc-top-app-bar__navigation-icon":s[18]==="top-app-bar:navigation","mdc-top-app-bar__action-item":s[18]==="top-app-bar:action","mdc-snackbar__action":s[18]==="snackbar:actions","mdc-banner__secondary-action":s[18]==="banner"&&s[8],"mdc-banner__primary-action":s[18]==="banner"&&!s[8],"mdc-tooltip__action":s[18]==="tooltip:rich-actions",...s[12]})},{style:Object.entries(s[13]).map(Se).concat([s[2]]).join(" ")},s[16],s[15],s[14],{href:s[7]},s[23]];var l=s[9];function c(t){let o={$$slots:{default:[Le]},$$scope:{ctx:t}};for(let i=0;i<r.length;i+=1)o=$(o,r[i]);return{props:o}}return l&&(e=ne(l,c(s)),s[29](e),e.$on("click",s[22])),{c(){e&&N(e.$$.fragment),n=oe()},m(t,o){e&&W(e,t,o),w(t,n,o),a=!0},p(t,o){const i=o[0]&12580351?Be(r,[o[0]&1024&&{tag:t[10]},o[0]&12189721&&{use:[[we,{ripple:t[3],unbounded:!1,color:t[4],disabled:!!t[23].disabled,addClass:t[19],removeClass:t[20],addStyle:t[21]}],t[17],...t[0]]},o[0]&266610&&{class:te({[t[1]]:!0,"mdc-button":!0,"mdc-button--raised":t[5]==="raised","mdc-button--unelevated":t[5]==="unelevated","mdc-button--outlined":t[5]==="outlined","smui-button--color-secondary":t[4]==="secondary","mdc-button--touch":t[6],"mdc-card__action":t[18]==="card:action","mdc-card__action--button":t[18]==="card:action","mdc-dialog__button":t[18]==="dialog:action","mdc-top-app-bar__navigation-icon":t[18]==="top-app-bar:navigation","mdc-top-app-bar__action-item":t[18]==="top-app-bar:action","mdc-snackbar__action":t[18]==="snackbar:actions","mdc-banner__secondary-action":t[18]==="banner"&&t[8],"mdc-banner__primary-action":t[18]==="banner"&&!t[8],"mdc-tooltip__action":t[18]==="tooltip:rich-actions",...t[12]})},o[0]&8196&&{style:Object.entries(t[13]).map(Se).concat([t[2]]).join(" ")},o[0]&65536&&Z(t[16]),o[0]&32768&&Z(t[15]),o[0]&16384&&Z(t[14]),o[0]&128&&{href:t[7]},o[0]&8388608&&Z(t[23])]):{};if(o[0]&1073741888&&(i.$$scope={dirty:o,ctx:t}),o[0]&512&&l!==(l=t[9])){if(e){Ce();const u=e;R(u.$$.fragment,1,0,()=>{J(u,1)}),je()}l?(e=ne(l,c(t)),t[29](e),e.$on("click",t[22]),N(e.$$.fragment),M(e.$$.fragment,1),W(e,n.parentNode,n)):e=null}else l&&e.$set(i)},i(t){a||(e&&M(e.$$.fragment,t),a=!0)},o(t){e&&R(e.$$.fragment,t),a=!1},d(t){s[29](null),t&&k(n),e&&J(e,t)}}}const Se=([s,e])=>`${s}: ${e};`;function Xe(s,e,n){let a,r,l;const c=["use","class","style","ripple","color","variant","touch","href","action","defaultAction","secondary","component","tag","getElement"];let t=se(e,c),{$$slots:o={},$$scope:i}=e;const u=ye(Ie());let{use:_=[]}=e,{class:g=""}=e,{style:C=""}=e,{ripple:E=!0}=e,{color:B="primary"}=e,{variant:p="text"}=e,{touch:d=!1}=e,{href:X=void 0}=e,{action:I="close"}=e,{defaultAction:q=!1}=e,{secondary:m=!1}=e,h,O={},T={},L=fe("SMUI:button:context"),{component:Q=ae}=e,{tag:Y=Q===ae?X==null?"button":"a":void 0}=e,b=t.disabled;pe("SMUI:label:context","button"),pe("SMUI:icon:context","button");function D(f){O[f]||n(12,O[f]=!0,O)}function j(f){(!(f in O)||O[f])&&n(12,O[f]=!1,O)}function y(f,ee){T[f]!=ee&&(ee===""||ee==null?(delete T[f],n(13,T)):n(13,T[f]=ee,T))}function le(){L==="banner"&&Ke(x(),m?"SMUIBannerButton:secondaryActionClick":"SMUIBannerButton:primaryActionClick")}function x(){return h.getElement()}function V(f){Oe[f?"unshift":"push"](()=>{h=f,n(11,h)})}return s.$$set=f=>{n(31,e=$($({},e),de(f))),n(23,t=se(e,c)),"use"in f&&n(0,_=f.use),"class"in f&&n(1,g=f.class),"style"in f&&n(2,C=f.style),"ripple"in f&&n(3,E=f.ripple),"color"in f&&n(4,B=f.color),"variant"in f&&n(5,p=f.variant),"touch"in f&&n(6,d=f.touch),"href"in f&&n(7,X=f.href),"action"in f&&n(24,I=f.action),"defaultAction"in f&&n(25,q=f.defaultAction),"secondary"in f&&n(8,m=f.secondary),"component"in f&&n(9,Q=f.component),"tag"in f&&n(10,Y=f.tag),"$$scope"in f&&n(30,i=f.$$scope)},s.$$.update=()=>{if(n(16,a=L==="dialog:action"&&I!=null?{"data-mdc-dialog-action":I}:{action:e.action}),n(15,r=L==="dialog:action"&&q?{"data-mdc-dialog-button-default":""}:{default:e.default}),n(14,l=L==="banner"?{}:{secondary:e.secondary}),b!==t.disabled){const f=x();"blur"in f&&f.blur(),n(27,b=t.disabled)}},e=de(e),[_,g,C,E,B,p,d,X,m,Q,Y,h,O,T,l,r,a,u,L,D,j,y,le,t,I,q,x,b,o,V,i]}class ie extends _e{constructor(e){super(),me(this,e,Xe,Fe,be,{use:0,class:1,style:2,ripple:3,color:4,variant:5,touch:6,href:7,action:24,defaultAction:25,secondary:8,component:9,tag:10,getElement:26},null,[-1,-1])}get getElement(){return this.$$.ctx[26]}}const Ve="./nijigen/version_map.json",Ge="./nijigen/words.json";async function De(s){return(await fetch(s)).json()}class ze{constructor(e){re(this,"db");re(this,"dbName");this.dbName=e,this.db=null}openStore(e,n,a){return new Promise((r,l)=>{const c=window.indexedDB.open(this.dbName,6);c.onsuccess=t=>{this.db=t.target.result,r(this.db)},c.onerror=t=>{l(t)},c.onupgradeneeded=t=>{const i=t.target.result.createObjectStore(e,{keyPath:n});Array.isArray(a)&&a.forEach(u=>{i.createIndex(u.key,u.key,{unique:u.unique})}),i.transaction.oncomplete=()=>{console.log("创建仓库成功")},console.log("更新成功"),console.log(t)}})}add(e,n){return new Promise((a,r)=>{const l=this.db.transaction([e],"readwrite").objectStore(e);let c=0,t=0;const o={onsuccess:u=>{++t>=c&&a({code:0,data:{total:c}})},onerror:u=>{r({code:1,message:u})}};let i;Array.isArray(n)?n.forEach(u=>{Array.isArray(u)?u.forEach(_=>{c++,i=l.put(_),i.onsuccess=o.onsuccess,i.onerror=o.onerror}):(i=l.put(u),i.onsuccess=o.onsuccess,i.onerror=o.onerror)}):(i=l.put(n),i.onsuccess=o.onsuccess,i.onerror=o.onerror)})}delete(e,n){return new Promise((a,r)=>{const l=this.db.transaction([e],"readwrite").objectStore(e).delete(n);l.onsuccess=()=>{a({code:0})},l.onerror=c=>{r({code:1,message:c})}})}getAllList(e){return new Promise((n,a)=>{const r=this.db.transaction([e]).objectStore(e).getAll();r.onsuccess=l=>{n(l.target.result)},r.onerror=l=>{a({code:1,message:l})}})}getItem(e,n){return new Promise((a,r)=>{const l=this.db.transaction([e]).objectStore(e).get(n);l.onsuccess=c=>{c.target.result?a({code:0,data:c.target.result}):a({code:1,data:c.target.result})},l.onerror=c=>{r({code:1,message:c})}})}async count(e,n){return new Promise((a,r)=>{const l=this.db.transaction([e],"readonly").objectStore(e);let c=l.count();n?c=l.index(n.key).count(n.range):c=l.count(),c.onsuccess=()=>{a(c.result)},c.onerror=t=>{r(t)}})}createCursor(e,n="",a){const r=this.db.transaction([e],"readonly").objectStore(e);let l;return n?l=r.index(n).openCursor(a):l=r.openKeyCursor(a),l}}const He="mahiru",U="js_word",G="has_study",z="not_study",H="not_good",Qe=[{key:z,unique:!1},{key:G,unique:!1},{key:H,unique:!1}],ue="word_version";function Ye(s){let e,n,a,r,l,c,t,o,i,u,_,g,C,E,B;return{c(){e=P("div"),n=v("总词汇量："),a=v(s[0]),r=K(),l=P("div"),c=v("未学习："),t=v(s[1]),o=K(),i=P("div"),u=v("已学会："),_=v(s[2]),g=K(),C=P("div"),E=v("不熟悉："),B=v(s[3]),A(e,"class","summary-item svelte-x7nw2t"),A(l,"class","summary-item svelte-x7nw2t"),A(i,"class","summary-item svelte-x7nw2t"),A(C,"class","summary-item svelte-x7nw2t")},m(p,d){w(p,e,d),S(e,n),S(e,a),w(p,r,d),w(p,l,d),S(l,c),S(l,t),w(p,o,d),w(p,i,d),S(i,u),S(i,_),w(p,g,d),w(p,C,d),S(C,E),S(C,B)},p(p,d){d&1&&F(a,p[0]),d&2&&F(t,p[1]),d&4&&F(_,p[2]),d&8&&F(B,p[3])},d(p){p&&k(e),p&&k(r),p&&k(l),p&&k(o),p&&k(i),p&&k(g),p&&k(C)}}}function Ze(s){let e,n,a;return{c(){e=v("学习进度："),n=v(s[4]),a=v("%")},m(r,l){w(r,e,l),w(r,n,l),w(r,a,l)},p(r,l){l&16&&F(n,r[4])},d(r){r&&k(e),r&&k(n),r&&k(a)}}}function ve(s){let e,n,a,r=s[6].desc+"",l,c=s[6].read&&Ee(s);return{c(){c&&c.c(),e=K(),n=P("div"),a=v("翻译："),l=v(r),A(n,"class","desc svelte-x7nw2t")},m(t,o){c&&c.m(t,o),w(t,e,o),w(t,n,o),S(n,a),S(n,l)},p(t,o){t[6].read?c?c.p(t,o):(c=Ee(t),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),o&64&&r!==(r=t[6].desc+"")&&F(l,r)},d(t){c&&c.d(t),t&&k(e),t&&k(n)}}}function Ee(s){let e,n,a=s[6].read+"",r;return{c(){e=P("div"),n=v("读法："),r=v(a),A(e,"class","read svelte-x7nw2t")},m(l,c){w(l,e,c),S(e,n),S(e,r)},p(l,c){c&64&&a!==(a=l[6].read+"")&&F(r,a)},d(l){l&&k(e)}}}function $e(s){let e,n=s[6].word+"",a,r,l,c,t,o,i,u=s[9]&&ve(s);return{c(){e=P("div"),a=v(n),r=K(),l=P("span"),c=v(s[7]),o=K(),u&&u.c(),i=oe(),A(l,"class",t=he(`tag jpw_tag-${s[8]}`)+" svelte-x7nw2t"),A(e,"class","word svelte-x7nw2t")},m(_,g){w(_,e,g),S(e,a),S(e,r),S(e,l),S(l,c),w(_,o,g),u&&u.m(_,g),w(_,i,g)},p(_,g){g&64&&n!==(n=_[6].word+"")&&F(a,n),g&128&&F(c,_[7]),g&256&&t!==(t=he(`tag jpw_tag-${_[8]}`)+" svelte-x7nw2t")&&A(l,"class",t),_[9]?u?u.p(_,g):(u=ve(_),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},d(_){_&&k(e),_&&k(o),u&&u.d(_),_&&k(i)}}}function xe(s){let e;return{c(){e=v("展示")},m(n,a){w(n,e,a)},d(n){n&&k(e)}}}function et(s){let e,n;return e=new ge({props:{$$slots:{default:[xe]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},m(a,r){W(e,a,r),n=!0},p(a,r){const l={};r&67108864&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){J(e,a)}}}function tt(s){let e;return{c(){e=v("掌握")},m(n,a){w(n,e,a)},d(n){n&&k(e)}}}function nt(s){let e,n;return e=new ge({props:{$$slots:{default:[tt]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},m(a,r){W(e,a,r),n=!0},p(a,r){const l={};r&67108864&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){J(e,a)}}}function st(s){let e;return{c(){e=v("未掌握")},m(n,a){w(n,e,a)},d(n){n&&k(e)}}}function at(s){let e,n;return e=new ge({props:{$$slots:{default:[st]},$$scope:{ctx:s}}}),{c(){N(e.$$.fragment)},m(a,r){W(e,a,r),n=!0},p(a,r){const l={};r&67108864&&(l.$$scope={dirty:r,ctx:a}),e.$set(l)},i(a){n||(M(e.$$.fragment,a),n=!0)},o(a){R(e.$$.fragment,a),n=!1},d(a){J(e,a)}}}function ot(s){let e,n,a,r,l,c,t,o,i,u,_,g,C,E,B,p,d,X,I,q;return o=new ce({props:{class:"jpw_summary",variant:"outlined",padded:!0,$$slots:{default:[Ye]},$$scope:{ctx:s}}}),u=new ce({props:{class:"jpw_process",variant:"outlined",padded:!0,$$slots:{default:[Ze]},$$scope:{ctx:s}}}),g=new ce({props:{class:"jpw_word-container",padded:!0,$$slots:{default:[$e]},$$scope:{ctx:s}}}),B=new ie({props:{variant:"raised",class:"jpw_btn-show",$$slots:{default:[et]},$$scope:{ctx:s}}}),B.$on("click",s[10]),d=new ie({props:{variant:"raised",class:"jpw_btn-ok",$$slots:{default:[nt]},$$scope:{ctx:s}}}),d.$on("click",s[12]),I=new ie({props:{variant:"raised",class:"jpw_btn-not",$$slots:{default:[at]},$$scope:{ctx:s}}}),I.$on("click",s[13]),{c(){e=P("div"),n=v(`背词小工具
  `),a=P("span"),r=v("版本："),l=v(s[5]),c=K(),t=P("div"),N(o.$$.fragment),i=K(),N(u.$$.fragment),_=K(),N(g.$$.fragment),C=K(),E=P("div"),N(B.$$.fragment),p=K(),N(d.$$.fragment),X=K(),N(I.$$.fragment),A(a,"class","version svelte-x7nw2t"),A(e,"class","title svelte-x7nw2t"),A(E,"class","btn-group svelte-x7nw2t"),A(t,"class","container svelte-x7nw2t")},m(m,h){w(m,e,h),S(e,n),S(e,a),S(a,r),S(a,l),w(m,c,h),w(m,t,h),W(o,t,null),S(t,i),W(u,t,null),S(t,_),W(g,t,null),S(t,C),S(t,E),W(B,E,null),S(E,p),W(d,E,null),S(E,X),W(I,E,null),q=!0},p(m,[h]){(!q||h&32)&&F(l,m[5]);const O={};h&67108879&&(O.$$scope={dirty:h,ctx:m}),o.$set(O);const T={};h&67108880&&(T.$$scope={dirty:h,ctx:m}),u.$set(T);const L={};h&67109824&&(L.$$scope={dirty:h,ctx:m}),g.$set(L);const Q={};h&67108864&&(Q.$$scope={dirty:h,ctx:m}),B.$set(Q);const Y={};h&67108864&&(Y.$$scope={dirty:h,ctx:m}),d.$set(Y);const b={};h&67108864&&(b.$$scope={dirty:h,ctx:m}),I.$set(b)},i(m){q||(M(o.$$.fragment,m),M(u.$$.fragment,m),M(g.$$.fragment,m),M(B.$$.fragment,m),M(d.$$.fragment,m),M(I.$$.fragment,m),q=!0)},o(m){R(o.$$.fragment,m),R(u.$$.fragment,m),R(g.$$.fragment,m),R(B.$$.fragment,m),R(d.$$.fragment,m),R(I.$$.fragment,m),q=!1},d(m){m&&k(e),m&&k(c),m&&k(t),J(o),J(u),J(g),J(B),J(d),J(I)}}}function lt(s,e,n){let a=0,r=0,l=0,c=0,t="0.00",o=null,i,u="0.0.0",_={word:"",desc:"",read:""},g="",C=0,E=!1;const B=()=>{n(9,E=!0)},p=async b=>{if(!E){B();return}n(9,E=!1);let D=_[H]||0,j=_[G];b?D>0&&D--:D++;const y={..._,[z]:0,[G]:j||b?1:0,[H]:D};await i.add(U,y),m(),d()},d=()=>{const b=Math.random();b<.1?h(1,IDBKeyRange.lowerBound(1),Math.ceil(Math.random()*l)):b<.3?h(2,IDBKeyRange.lowerBound(3),Math.ceil(Math.random()*c)):h(0,IDBKeyRange.lowerBound(1),Math.ceil(Math.random()*r))};async function X(){const b=await De(Ve),D=localStorage.getItem(ue),j=b.findIndex(y=>y===D);return b.slice(j+1)}async function I(b){o||(o=await De(Ge));const D=[],{word:j,read:y,desc:le}=o[b],x=j.length;for(let V=0;V<x;V++)D.push({[U]:j[V],word:j[V],read:y[V],desc:le[V],[z]:1});return D}async function q(b){if(i=new ze(He),await i.openStore(U,U,Qe),b){const{code:D}=await i.add(U,b);D===0&&localStorage.setItem(ue,u)}L()}const m=async()=>{n(0,a=await i.count(U)),n(1,r=await i.count(U,{key:z,range:IDBKeyRange.lowerBound(1)})),n(2,l=await i.count(U,{key:G,range:IDBKeyRange.lowerBound(1)})),n(3,c=await i.count(U,{key:H,range:IDBKeyRange.lowerBound(3,!0)})),n(4,t=(l/a*100).toFixed(2))},h=(b=0,D,j=0)=>{if(b===0){const y=i.createCursor(U,z,D);y.onsuccess=O(z,j)}if(b===1){const y=i.createCursor(U,G,D);y.onsuccess=O(G,j)}if(b===2){const y=i.createCursor(U,H,D);y.onsuccess=O(H,j)}},O=(b,D)=>j=>{const y=j.target.result;if(!y){switch(b){case z:h(2);break;case G:h(0);break;case H:h(1);break}return}if(D>0){y.advance(D),D=0;return}switch(n(6,_=y.value||{}),b){case z:n(7,g="新"),n(8,C=0);break;case G:n(7,g="已掌握"),n(8,C=1);break;case H:n(7,g="不熟悉"),n(8,C=2);break}};async function T(){const b=await X();if(b.length===0){n(5,u=localStorage.getItem(ue)),q();return}const D=[];for(let j=0;j<b.length;j++)D.push(await I(b[j]));n(5,u=b[b.length-1]),o=null,q(D)}async function L(){await m(),d()}return Je(T),[a,r,l,c,t,u,_,g,C,E,B,p,()=>p(!0),()=>p(!1)]}class ut extends _e{constructor(e){super(),me(this,e,lt,ot,be,{})}}export{ut as default};
